<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Start</title>

<style>
  :root {
    /* Layout */
    --body-width: 98%;
    --body-width-max: 1600px;
    
    /* Spacing */
    --space: 1rem;
    --space-small: 0.5rem;
    
    /* Typography */
    --font-family: system-ui, -apple-system, 'Segoe UI', 'Roboto', Ubuntu, Cantarell, 'Noto Sans', 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji', sans-serif;
    --line-height: 1.6;
    --heading-size: 1.25rem;
    --heading-weight: 600;
    --text-size: 1.1rem;
    
    /* Colors */
    --color-gray-light: #f8fafc;
    --color-gray: #f5f5f5;
    --color-gray-dark: #d4d4d4;
    --color-border: #e2e8f0;
    --color-text: #262626;
    --color-link: #3b82f6;
    --color-link-hover: #1e40af;
    
    /* Other */
    --border-radius: 7px;
  }

  * {
    box-sizing: border-box;
  }

  html, body {
    height: 100%;
  }

  body {
    width: var(--body-width);
    max-width: var(--body-width-max);
    margin: var(--space) auto;
    padding: 0;

    font-family: var(--font-family);
    font-size: var(--text-size);
    line-height: var(--line-height);
    
    color: var(--color-text);
    background: var(--color-gray);
  }

  h2 {
    margin: 0 var(--space-small);
    padding: 0;
    
    font-size: var(--heading-size);
    font-weight: var(--heading-weight);
    
    color: var(--color-text);
    border-bottom: 1px solid var(--color-gray-dark);
  }

  ul, ol {
    list-style: none;
    margin: var(--space) 0;
    padding: 0;
  }

  li {
    margin: 0;
    padding: 0 var(--space-small);
  }

  li:hover, li:active {
    background: var(--color-gray);
  }

  a, a:visited {
    color: var(--color-link);
    text-decoration: none;
  }

  a:hover, a:active {
    color: var(--color-link-hover);
    text-decoration: underline;
  }

  home-container {
    display: flex;
    flex-direction: column;
    gap: var(--space);
  }

  .top-row {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space);
  }

  home-favorites,
  home-main,
  home-sidebar {
    flex: 1;
    min-width: calc(33.333% - var(--space) * 2/3); /* Ensure equal width with gap consideration */
  }

  home-tmp {
    width: 100%;
    margin-top: calc(2 * var(--space));
  }

  /* Tablet layout: 2 columns */
  @media (max-width: 800px) {
    home-favorites,
    home-main,
    home-sidebar {
      min-width: calc(50% - var(--space) / 2); /* Two columns on tablet */
    }
    
    /* Ensure the third item takes full width in the next row */
    home-sidebar {
      flex-basis: 100%;
    }
  }

  /* Mobile layout: 1 column */
  @media (max-width: 640px) {
    home-favorites,
    home-main,
    home-sidebar {
      min-width: 100%; /* Full width on mobile */
    }
  }

  home-favorites,
  home-main,
  home-sidebar,
  home-tmp {
    padding: var(--space);
    
    background: var(--color-gray-light);
    border-radius: var(--border-radius);
    border: 1px solid var(--color-border);
    
    box-shadow: rgba(0, 0, 0, 0.1) 0px 4px 12px;
    
    overflow-wrap: break-word;
    word-wrap: break-word;
    hyphens: auto;
  }

  /* Multi-column layout for home-tmp content */
  home-tmp ul {
    column-count: 3;
    column-gap: var(--space);
    column-rule: 1px solid var(--color-gray-dark);
    padding: 0;
  }

  /* Prevent breaking items across columns */
  home-tmp li {
    break-inside: avoid;
    page-break-inside: avoid;
    margin-bottom: var(--space-small);
  }

  /* Tablet layout: 2 columns */
  @media (max-width: 800px) {
    home-tmp ul {
      column-count: 2;
    }
  }

  /* Mobile layout: 1 column */
  @media (max-width: 640px) {
    home-tmp ul {
      column-count: 1;
      column-rule: none; /* Remove vertical line when there's only one column */
    }
  }

  footer {
    padding: var(--space) 0;
    text-align: center;
  }
</style>

</head>
<body>
<main>

  <home-container>
    <section class="top-row">
      <home-favorites><content-md data-src="1-favorites.md"></content-md></home-favorites>
      <home-main><content-md data-src="2-main.md"></content-md></home-main>
      <home-sidebar><content-md data-src="3-sidebar.md"></content-md></home-sidebar>
    </section>
    <home-tmp><content-md data-src="4-tmp.md"></content-md></home-tmp>
  </home-container>

</main>

<footer>
  <p>
    <small>
      <a href="https://start.oinam.com">Start</a> by <a href="https://oinam.com">Oinam</a>. <a href="https://github.com/oinam/start">Source</a>.
    </small>
  </p>
</footer>

<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

<script>
  // Define the content-md custom element
  class ContentMd extends HTMLElement {
    constructor() {
      super();
    }

    async connectedCallback() {
      const src = this.getAttribute('data-src');
      if (!src) {
        this.innerHTML = '<p>Error: No source file specified</p>';
        return;
      }

      try {
        const response = await fetch(src);
        if (!response.ok) {
          throw new Error(`Failed to load ${src}: ${response.status} ${response.statusText}`);
        }
        
        const markdown = await response.text();
        this.innerHTML = marked.parse(markdown);
      } catch (error) {
        console.error(`Error loading markdown file: ${error}`);
        this.innerHTML = `<p>Error loading ${src}: ${error.message}</p>`;
      }
    }
  }

  // Register the custom element
  customElements.define('content-md', ContentMd);

  // Initialize all content-md elements
  document.addEventListener('DOMContentLoaded', () => {
    console.log('DOM loaded, initializing markdown content...');
  });
</script>

</body>
</html>