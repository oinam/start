<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Start</title>

<style>
  :root {
    --body-width: 96%;
    --body-width-max: 1600px;
    
    --space: 1rem;
    --space-small: 0.6rem;
    
    --font-family: system-ui, -apple-system, 'Segoe UI', 'Roboto', Ubuntu, Cantarell, 'Noto Sans', 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji', sans-serif;
    --line-height: 1.618034; /* Golden Ratio */
    --heading-size: 1.25rem;
    --heading-weight: 600;
    --text-size: 1rem;
    
    /* Tailwind color, https://tailwindcss.com/docs/colors */
    --color-primary: oklch(54.6% 0.245 262.881); /* Blue-700 */
    --color-accent: oklch(51.8% 0.253 323.949); /* Fuchsia-700 */
    
    --color-gray-light:   oklch(98.4% 0.003 247.858); /* Slate-50 */
    --color-gray:         oklch(97% 0 0); /* Neutal-100 */
    --color-gray-dark:    oklch(87% 0 0); /* Neutal-300 */
    --color-gray-darker:  oklch(55.6% 0 0);  /* Neutal-500 */
    --color-gray-darkest: oklch(26.9% 0 0); /* Neutal-800 */
    
    --color-border: var(--color-gray-dark);
    
    --color-text: var(--color-gray-darkest);
    --color-link: var(--color-primary);
    --color-link-hover: var(--color-accent);
    
    --border-radius: 7px;
  }

  *,
  ::before,
  ::after {
    box-sizing: border-box;
  }

  html, body {
    height: 100%;
  }

  body {
    width: var(--body-width);
    max-width: var(--body-width-max);
    margin: var(--space) auto;
    padding: 0;

    font-family: var(--font-family);
    font-size: var(--text-size);
    line-height: var(--line-height);
    
    color: var(--color-text);
    background: var(--color-gray);
  }

  h2 {
    margin: 0;
    padding: var(--space-small) var(--space);
    
    font-size: var(--heading-size);
    font-weight: var(--heading-weight);
    
    background: var(--color-gray);
    color: var(--color-text);

    border-radius: var(--border-radius) var(--border-radius) 0 0;
    border-bottom: 1px solid var(--color-gray-dark);
  }

  a, a:visited {
    color: var(--color-link);
    text-decoration: none;
  }

  a:hover, a:active {
    color: var(--color-link-hover);
    text-decoration: underline;
  }

  ul, ol {
    list-style: none;
    margin: var(--space) 0;
    padding: 0;
  }

  li {
    margin: 0;
    padding: 0 var(--space);
    border: 2px solid transparent;
  }

  li:hover, li:active {
    color: var(--color-gray-darker);
    background: var(--color-gray);
    border-left-color: var(--color-gray-darker);
    border-right-color: var(--color-gray-darker);
  }

  hr {
    margin: var(--space);
    background: none;
    height: 0;
    border: 0 none;
    border-bottom: 1px solid var(--color-gray-dark);
  }

  main {
    display: flex;
    flex-direction: column;
    gap: var(--space);
  }

  bookmark-primary {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space);
  }

  bookmark-favorites,
  bookmark-main,
  bookmark-sidebar {
    flex: 1;
    min-width: calc(33.333% - var(--space) * 2/3); /* Ensure equal width with gap consideration */
  }

  bookmark-tmp {
    width: 100%;
    margin-top: calc(2 * var(--space));
  }

  /* Tablet layout: 2 columns */
  @media (max-width: 800px) {
    bookmark-favorites,
    bookmark-main,
    bookmark-sidebar {
      min-width: calc(50% - var(--space) / 2); /* Two columns on tablet */
    }
    
    /* Ensure the third item takes full width in the next row */
    bookmark-sidebar {
      flex-basis: 100%;
    }
  }

  /* Mobile layout: 1 column */
  @media (max-width: 640px) {
    bookmark-favorites,
    bookmark-main,
    bookmark-sidebar {
      min-width: 100%; /* Full width on mobile */
    }
  }

  bookmark-favorites,
  bookmark-main,
  bookmark-sidebar,
  bookmark-tmp {
    padding: 0;
    
    background: var(--color-gray-light);
    border-radius: var(--border-radius);
    border: 1px solid var(--color-border);
    
    box-shadow: rgba(0, 0, 0, 0.1) 0px 4px 12px;
    
    overflow-wrap: break-word;
    word-wrap: break-word;
    hyphens: auto;
  }

  /* tmp columnar layout - process ’EM */
  bookmark-tmp ul {
    column-count: 3;
    column-gap: 0;
    column-rule: 1px solid var(--color-gray-dark);
    padding: 0;
  }

  bookmark-tmp li {
    break-inside: avoid;
    page-break-inside: avoid;
    margin-bottom: var(--space-small);
  }

  /* Tablet layout: 2 columns */
  @media (max-width: 800px) {
    bookmark-tmp ul {
      column-count: 2;
    }
  }

  /* Mobile layout: 1 column */
  @media (max-width: 640px) {
    bookmark-tmp ul {
      column-count: 1;
      column-rule: none; /* Remove vertical line when there's only one column */
    }
  }

  footer {
    margin: 0;
    padding: var(--space);
  }
</style>

</head>
<body>
<main>
  <bookmark-primary>
    <bookmark-favorites><content-md data-src="1-favorites.md"></content-md></bookmark-favorites>
    <bookmark-main><content-md data-src="2-main.md"></content-md></bookmark-main>
    <bookmark-sidebar><content-md data-src="3-sidebar.md"></content-md></bookmark-sidebar>
  </bookmark-primary>
  <bookmark-tmp><content-md data-src="4-tmp.md"></content-md></bookmark-tmp>
</main>

<footer>
  <p>
    <small>
      <a href="https://start.oinam.com">Start</a> by <a href="https://oinam.com">Oinam</a>.
      <a href="https://github.com/oinam/start">Source</a>.
    </small>
  </p>
</footer>

<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
<script>
  // Define the "content-md" custom element
  class ContentMd extends HTMLElement {
    constructor() {
      super();
    }

    async connectedCallback() {
      const src = this.getAttribute('data-src');
      if (!src) {
        this.innerHTML = '<p>Error: No source file specified</p>';
        return;
      }

      try {
        const response = await fetch(src);
        if (!response.ok) {
          throw new Error(`Failed to load ${src}: ${response.status} ${response.statusText}`);
        }
        
        const markdown = await response.text();
        this.innerHTML = marked.parse(markdown);
      } catch (error) {
        console.error(`Error loading markdown file: ${error}`);
        this.innerHTML = `<p>Error loading ${src}: ${error.message}</p>`;
      }
    }
  }

  // Register the custom element for Markdown Replacement
  customElements.define('content-md', ContentMd);

  // Initialize "content-md" elements
  document.addEventListener('DOMContentLoaded', () => {
    console.log('DOM loaded, initializing markdown content…');
  });
</script>

</body>
</html>